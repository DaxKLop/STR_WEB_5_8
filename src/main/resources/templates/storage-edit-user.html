<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Редактировать пользователя</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://unpkg.com/imask"></script>
</head>
<body>
<header th:insert="blocks/header-admin :: header"></header>


<div class="container mt-5 mb-5">
    <h1>Редактировать пользователя</h1>
    <div th:each="el : ${users}">
        <form method="post">
            <br>
                <input type="text" th:value="${el.login}" name="login" placeholder="Логин"  class="form-control" ><br>
                <input type="password" th:value="${el.password}" name="password" placeholder="Пароль" class="form-control"><br>
                <div>
                    <select name= "role" style="margin-bottom:15 px" class="form-select">
                        <option >Администратор</option>
                        <option selected>Пользователь</option>
                    </select>
                </div>
                <br>
                <input type="text" th:value="${el.person_name}" name="name" placeholder="Имя" class="form-control" ><br>
                <input type="text" th:value="${el.phone}" name="phone" placeholder="Телефон" class="form-control" id="phone-input"><br>
                <input type="email"  th:value="${el.mail}"name="email" placeholder="Почта" class="form-control"><br>
                <button type="submit"  class="btn btn-success">Изменить запись</button>
        </form>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function() {
        var phoneInput = document.getElementById('phone-input');
        var phoneMask = IMask(phoneInput, {
            mask: '+000 (00) 000-00-00',
            placeholderChar: 'X',
            lazy: false
        });
    });
</script>
<script>
    var inputField = document.getElementById('phone-input');
    var submitButton = document.getElementById('reg_btn');

    inputField.addEventListener('keyup', function() {

        if (inputField.value.includes('X')) {
            submitButton.disabled = true; // Добавляем атрибут disabled
        } else {
            submitButton.disabled = false; // Удаляем атрибут disabled
        }
    });
</script>
</body>
</html>


